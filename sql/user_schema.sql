CREATE SCHEMA IF NOT EXISTS users;

CREATE TABLE IF NOT EXISTS users.users (
    id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    given_name          varchar(100)        DEFAULT NULL,
    email               varchar(100)        UNIQUE NOT NULL,
    affiliation         varchar(100)        DEFAULT NULL,
    country             varchar(100)        DEFAULT NULL,
    auth_identity       varchar(100)        NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS users.user_dataset_map (
    dataset_id      integer                 NOT NULL REFERENCES datasets.datasets,
    user_id         integer                 NOT NULL REFERENCES users.users,
    PRIMARY KEY(dataset_id, user_id)
);

--------------------------------------------------------------------------------
-- Indexes
--
